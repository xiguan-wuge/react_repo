{"version":3,"sources":["src\\react\\create-element.js","src\\react-dom\\dom.js","src\\react-dom\\render.js","src\\react\\component.js","src\\react\\index.js","src\\react-dom\\index.js","src\\index.js"],"names":["createElement","tag","attrs","children","keys","key","setAttribute","dom","name","value","test","toLowerCase","style","cssText","removeAttribute","renderComponent","render","_render","vnode","undefined","console","log","String","textNode","document","createTextNode","component","createComponent","setComponentProps","base","Object","forEach","child","props","renderer","parentNode","replaceChild","_component","inst","prototype","Component","constructor","container","appendChild","isReactComponent","state","stateChange","assign","Counter","num","onClick","setState","React","ReactDOM","fontSize","fontWight","getElementById"],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChBf;;;;AACA;;;;;;kBACe;AACbxC,wCADa;AAEbwC;AAFa;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACFf;;kBAEe;AACbxB;AADa","file":"src.5e5f3d7b.map","sourceRoot":"..","sourcesContent":["function createElement(tag, attrs, ...children) {  //createElement  返回虚拟节点\r\n  attrs = attrs || {};\r\n  // console.log(tag, attrs, children);\r\n  return {\r\n    tag,\r\n    attrs,\r\n    children,\r\n    keys: attrs.key || null\r\n  }\r\n}\r\n\r\nexport default createElement;","export function setAttribute(dom, name, value) {\r\n  if (name === 'className') name = 'class';\r\n  if (/on\\w+/.test(name)) {\r\n    name = name.toLowerCase();\r\n    // console.log(name);\r\n    // console.log(dom);\r\n    dom[name] = value || '';\r\n  } else if (name === 'style') {\r\n    if (!value || typeof value === 'string') {\r\n      dom.style.cssText = value;\r\n    } else if (value && typeof value === 'object') {\r\n      for (let name in value) {\r\n        // fontSize\r\n        dom.style[name] = typeof value[name] === 'number' ? value[name] + 'px' : value[name];\r\n      }\r\n    }\r\n  } else {\r\n    if (name in dom) {\r\n      dom[name] = value || '';\r\n    }\r\n    if (value) {\r\n      dom.setAttribute(name, value);\r\n    } else {\r\n      dom.removeAttribute(name, value);\r\n    }\r\n  }\r\n}\r\n","import { setAttribute } from './dom.js'\r\nimport Component from '../react/component.js';\r\n/**\r\n * 将虚拟DOM 变真实DOM\r\n * @params vnode 虚拟DOM, \r\n * @return 返回DOM\r\n */\r\n\r\nfunction _render(vnode) {\r\n  // console.log(vnode);\r\n  // return document.createTextNode('render');\r\n  // 1. 递归 将结点转成dom ,子结点递归，出口就是文本结点\r\n  // 2. 节点类型 三种： \r\n  // 文本结点 return createTextNode()\r\n  // 标签结点 createElement attr chilren设置（递归_render）\r\n  // 3. Component render(return jsx)\r\n  // render()\r\n  if (vnode === undefined || vnode === null || typeof vnode === 'boolean')\r\n    vnode = '';\r\n  if(typeof vnode === 'number') {\r\n    console.log(vnode);\r\n    vnode = String(vnode);\r\n  }\r\n  if (typeof vnode === 'string') {\r\n    let textNode = document.createTextNode(vnode);\r\n    return textNode;\r\n  }\r\n  // <Counter />  不是正常标签, vnode.tag= function Counter(){}\r\n  if (typeof vnode.tag === 'function') {\r\n    // console.log(vnode);\r\n    // return document.createTextNode('component');\r\n    const component = createComponent(vnode.tag, vnode.attrs);\r\n    setComponentProps(component, vnode.attrs);\r\n    return component.base;\r\n  }\r\n\r\n  const dom = document.createElement(vnode.tag);\r\n  if (vnode.attrs) {\r\n    Object.keys(vnode.attrs).forEach(key => {\r\n      const value = vnode.attrs[key];\r\n      setAttribute(dom, key, value);\r\n    })\r\n  }\r\n\r\n  if (vnode.children) {\r\n    vnode.children.forEach(child => render(child, dom));\r\n  }\r\n\r\n  return dom;\r\n}\r\n\r\nfunction setComponentProps(component, props) {\r\n  component.props = props;\r\n  renderComponent(component);\r\n}\r\n\r\n// 将component里的jsx转为DOM 他还会在setState时调用 \r\nexport function renderComponent(component) {\r\n  let base; //jsx=> DOM\r\n  const renderer = component.render();\r\n  base = _render(renderer);\r\n  // 非第一次渲染组件\r\n  if(component.base && component.base.parentNode) {\r\n    component.base.parentNode.replaceChild(base, component.base)\r\n  }\r\n  component.base = base;\r\n  base._component = component;\r\n\r\n}\r\n\r\nfunction createComponent(component, props) {\r\n  let inst;\r\n  if (component.prototype && component.prototype.render) {\r\n    inst = new component(props);\r\n  } else {\r\n    inst = new Component(props);\r\n    inst.constructor = component;\r\n    inst.render = function () {\r\n      return this.constructor(props);\r\n    }\r\n  }\r\n  return inst;\r\n}\r\nexport function render(vnode, container) {\r\n  return container.appendChild(_render(vnode));\r\n}\r\n","import { renderComponent } from \"../react-dom/render\";\r\n\r\nclass Component {\r\n  constructor(props = {}) {\r\n    this.isReactComponent = true;\r\n    this.state = {};\r\n    this.props=props;\r\n  }\r\n  setState(stateChange) {\r\n    // console.log(\"stateChange\")\r\n    Object.assign(this.state, stateChange);\r\n    //更新dom \r\n    renderComponent(this)\r\n  }\r\n}\r\n\r\nexport default Component;","import createElement from './create-element.js'; \r\nimport Component from './component.js'\r\nexport default {\r\n  createElement,\r\n  Component\r\n}","import { render } from './render'\r\n\r\nexport default {\r\n  render\r\n}\r\n","import React from './react'\r\nimport ReactDOM from './react-dom'\r\n\r\nclass Counter extends React.Component{\r\n  constructor(props) {\r\n    super(props)\r\n    this.state= {\r\n      num:1\r\n    }\r\n  }\r\n  render() {\r\n    return(\r\n      <div>\r\n        <h1>count: {this.state.num}</h1>\r\n        <button onClick={()=>this.onClick()}>add</button>\r\n      </div>\r\n    )\r\n  }\r\n  onClick () {\r\n    // console.log(this)\r\n    this.setState({\r\n      num:this.state.num+1\r\n    })\r\n    // console.log(this.state.num)\r\n  }\r\n}\r\nReactDOM.render(\r\n  <div>\r\n    Hello\r\n    <span className='rt' onClick=\"console.log('zz')\" style={{fontSize:20, fontWight: \"bold\"}}>World</span>\r\n    <Counter/>\r\n  </div>\r\n,\r\ndocument.getElementById('root'))"]}